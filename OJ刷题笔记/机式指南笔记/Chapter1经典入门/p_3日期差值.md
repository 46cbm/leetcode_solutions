# 例3_日期差值

**题目描述：**

```
有两个日期，求两个日期之间的天数。
如果两个日期是连续的，我们规定他们之间的天数为两天。
```

**输入：**

```
有多组数据，每组数据两行，分别表示两个日期，形式为YYYYMMDD
```

**输出：**

```
每组数据输出一行，即日期差值
```

**输入样例：**

```
20110412
20110422
```

**输出样例：**

```
11
```



**思路：**

```
首先，闰年并不是4年出现一次，如1896和1904隔了8年。
这里判断闰年的方法  Year % 100 != 0 && Year % 4 == 0 || Year % 400 == 0
用宏定义的方法来判断。

二，用与0000年1月1日差的日期来做运算。得到两日输入日期的相对日期，再求差。

三，int buf[5001][13][32]来存储与0000年之间差的天数。
将日期本身同其存储地址联系起来。将数据本身和数据的存储地址联系起来，这是Hash的基本思想。
且这里不会产生冲突。

四，buf定义为全局变量。因为占空间很大，若放在函数中可能栈溢出。
凡是涉及开辟大量内存空间的情况，务必定义为全局变量，或在函数内动态申请内存。
C/C++定义了4个内存区间：
	代码区，
	全局变量与静态变量区，
	局部变量区即栈区，
	动态存储区，即堆（heap）区或自由存储区（free store）。
	
PS：这里没有给出日期范围，但给到5000年已符合测试数据。
```



**代码：**

```c++
#include<iostream>
#define ISLEAP(x) x % 100 != 0  && x % 4 == 0 || x % 400 == 0

int dayOfMonth[13][2] = {
	0,0,
	31,31,
	28,29,		//闰年2月多一天
	31,31,
	30,30,
	31,31,
	30,30,
	31,31,
	31,31,
	30,30,
	31,31,
	30,30,
	31,31
};

struct Date {
	int day;
	int month;
	int year;
	void nextDay() {
		day++;
		if (day > dayOfMonth[month][ISLEAP(year)]) {
			day = 1;
			month++;
			if (month > 12) {
				month = 1;
				year++;
			}
		}
	}
};

int buf[5001][13][32];
int Abs(int x) {
	return x > 0 ? x : -x;
}

int main() {
	Date tmp;
	int cnt = 0;
	tmp.day = 1;
	tmp.month = 1;
	tmp.year = 0;
	//将每一天日与0年1月1日之间的差保存起来
	while (tmp.year != 5001) {
		buf[tmp.year][tmp.month][tmp.day] = cnt;
		tmp.nextDay();
		cnt++;
	}
	int d1, m1, y1;
	int d2, m2, y2;
	while (scanf("%4d%2d%2d", &y1, &m1, &d1) != EOF) {
		scanf("%4d%2d%2d", &y2, &m2, &d2);
		printf("%d\n", Abs(buf[y2][m2][d2] - buf[y1][m1][d1]) + 1);
	}
	return 0;
}
```


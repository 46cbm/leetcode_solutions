# 例9_A^B

**题目描述：**

```
求A^B的最后三位数表示的整数
```

**输入：**

```
多个测试实例，每个实例占一行，由两个正整数A和B组成(1 <= A,B <= 10000)
输入两个0表示结束，不作处理
```

**输出：**

```
输出A^B最后三位数表示的整数
```

**输入样例：**

```
2 3
12 6
6789 10000
0 0
```

**输出样例：**

```
8
984
1
```



**思路：**

```
按照输入的规模，直接求A^B数据是保存不了的。但是只用算最后三位，计算过程中A及所有中间值都只用最后三位即可。
用二分求幂的方法，快速求幂。
二分求幂：
把a的b次方变成若干个a的2^k次方。
如b = 31，则 a^b = a^(2^0) * a^(2^1) * a^(2^2) * a^(2^3) * a^(2^4) 
                = a^(1) * a^(2) * a^(4) * a^(8) * a^(16) 
因为31 = (2^0) + (2^1) + (2^2) + (2^3) + (2^4) 
```



**代码：**

```c++
#include<stdio.h>

int main() {
	int a, b;
	while (scanf("%d%d", &a, &b) != EOF) {
		if (a == 0 && b == 0) break;
		int ans = 1;

		//一边求b的二进制数，一边计算a的2^k次，并将需要的部分累成到ans上
		while (b != 0) {
			if (b % 2 == 1) {	//当前二进制位为1，若为0则不需累乘
				ans *= a;
				ans %= 1000;	//只需要最后三位
			}
			b /= 2;
			a *= a;				//求下一位二进制位的权重
			a %= 1000;			//只用最后三位
		}
		printf("%d\n", ans);
	}
	return 0;
}
```

